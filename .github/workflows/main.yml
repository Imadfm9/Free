name: Facebook Live Stream Continuous

on:
  workflow_dispatch:  # لتشغيل العمل يدويًا من GitHub
  schedule:
    - cron: "*/10 * * * *"  # لتشغيل العمل كل 10 دقائق

jobs:
  stream:
    runs-on: ubuntu-latest

    steps:
    - name: Install FFmpeg
      run: sudo apt-get update && sudo apt-get install -y ffmpeg

    - name: Start Streaming to Facebook via RTMPS
      run: |
        ffmpeg -re -i "https://live4.beinconnect.us/YallaGoalApp/beINSports4.m3u8" \
        -c:v copy -c:a aac -strict -2 -f flv \
        rtmps://live-api-s.facebook.com:443/rtmp/FB-122163721700260989-0-AbyXompQphPluKJ3

    - name: Check Stream Status
      run: |
        sleep 300  # اجعل FFmpeg يعمل لمدة 5 دقائق (يمكن تعديل الوقت حسب الحاجة)
        # يمكنك إضافة فحوصات أو إجراءات أخرى مثل إرسال إشعار في حال حدوث مشكلة.
